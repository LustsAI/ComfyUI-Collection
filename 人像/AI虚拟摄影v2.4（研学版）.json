{"last_node_id":628,"last_link_id":1006,"nodes":[{"id":279,"type":"Reroute","pos":[-946.8139912381264,1810.3878781651856],"size":[82,26],"flags":{},"order":80,"mode":0,"inputs":[{"name":"","type":"*","link":931,"label":""}],"outputs":[{"name":"MODEL","type":"MODEL","links":[463,867,899,918],"slot_index":0,"label":"MODEL"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":7,"type":"CLIPTextEncode","pos":[-1574.4521375894528,718.7409675151126],"size":{"0":304.274169921875,"1":138.04071044921875},"flags":{"collapsed":false},"order":67,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":null,"label":"CLIP","slot_index":0},{"name":"text","type":"STRING","link":877,"widget":{"name":"text"},"label":"文本"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[414],"slot_index":0,"label":"条件"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["NSFW,swimsuit,embedding:bad_pictures_v2, embedding:EasyNegativeV2, embedding:ng_deepnegative_v1_75t, text,logo,tattoo, watermark,Japan,black and white, (illustration:1.4), oil painting"],"color":"#322","bgcolor":"#533"},{"id":5,"type":"EmptyLatentImage","pos":[-1566.4521375894528,939.7409675151125],"size":{"0":308.14697265625,"1":74},"flags":{"collapsed":false,"pinned":false},"order":58,"mode":0,"inputs":[{"name":"width","type":"INT","link":797,"widget":{"name":"width"},"label":"宽度"},{"name":"height","type":"INT","link":798,"widget":{"name":"height"},"label":"高度"},{"name":"batch_size","type":"INT","link":799,"widget":{"name":"batch_size"},"label":"批次大小"}],"outputs":[{"name":"LATENT","type":"LATENT","links":[146],"slot_index":0,"label":"Latent"}],"properties":{"Node name for S&R":"EmptyLatentImage"},"widgets_values":[616,1376,1]},{"id":6,"type":"CLIPTextEncode","pos":[-1581.4521375894528,490.74096751511166],"size":{"0":304.61114501953125,"1":142.4404754638672},"flags":{"collapsed":false},"order":66,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":null,"label":"CLIP","slot_index":0},{"name":"text","type":"STRING","link":876,"widget":{"name":"text"},"label":"文本","slot_index":1}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[882],"slot_index":0,"label":"条件"}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["beautiful scenery nature glass bottle landscape, , purple galaxy bottle,"],"color":"#232","bgcolor":"#353"},{"id":559,"type":"Note","pos":[-2910.452137589455,1014.7409675151122],"size":{"0":315.19818115234375,"1":149.15362548828125},"flags":{},"order":0,"mode":0,"properties":{"text":""},"widgets_values":["lora模型设置"],"color":"#432","bgcolor":"#653"},{"id":508,"type":"Note","pos":[-2380.452137589454,1016.7409675151122],"size":{"0":400.6131591796875,"1":151.5445556640625},"flags":{},"order":1,"mode":0,"properties":{"text":""},"widgets_values":["大模型和lora模型设置"],"color":"#432","bgcolor":"#653"},{"id":560,"type":"Note","pos":[-1894.4521375894535,1015.7409675151122],"size":{"0":210,"1":151.40322875976562},"flags":{},"order":2,"mode":0,"properties":{"text":""},"widgets_values":["vue和clip设置为全局"],"color":"#432","bgcolor":"#653"},{"id":298,"type":"Reroute","pos":[-2041.9963384512416,1850.764074667073],"size":[140.8,26],"flags":{},"order":73,"mode":0,"inputs":[{"name":"","type":"*","link":714,"label":""}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[449],"slot_index":0,"label":"CONDITIONING"}],"properties":{"showOutputText":true,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":548,"type":"PreviewImage","pos":[-1627.7154250554004,1312.9585243907093],"size":{"0":190.82542419433594,"1":246},"flags":{},"order":57,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":929}],"properties":{"Node name for S&R":"PreviewImage"},"color":"#233","bgcolor":"#355"},{"id":563,"type":"Note","pos":[-1427.715425055401,1312.9585243907093],"size":{"0":216.5944366455078,"1":212.93089294433594},"flags":{},"order":3,"mode":0,"properties":{"text":""},"widgets_values":["由controlnet生成的骨架图预览\n\n提示：此处有预览则说明工作正常。"],"color":"#432","bgcolor":"#653"},{"id":547,"type":"PreviewImage","pos":[-1835.7154250554024,1312.9585243907093],"size":{"0":192.97897338867188,"1":246},"flags":{},"order":65,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":926}],"properties":{"Node name for S&R":"PreviewImage"},"color":"#233","bgcolor":"#355"},{"id":564,"type":"Note","pos":[-722.8747623669785,-115.41700372762372],"size":{"0":210,"1":70},"flags":{},"order":4,"mode":0,"properties":{"text":""},"widgets_values":["首次出图"],"color":"#432","bgcolor":"#653"},{"id":555,"type":"PreviewImage","pos":[26.125237633021854,24.58299627237628],"size":{"0":711.473876953125,"1":1072.1741943359375},"flags":{"pinned":false},"order":106,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":932,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"},"color":"#233","bgcolor":"#355"},{"id":565,"type":"Note","pos":[32.12523763302179,-115.41700372762372],"size":{"0":210,"1":70},"flags":{},"order":5,"mode":0,"properties":{"text":""},"widgets_values":["潜空间放大"],"color":"#432","bgcolor":"#653"},{"id":567,"type":"Note","pos":[1529.125237633021,-115.41700372762372],"size":{"0":210,"1":70},"flags":{},"order":6,"mode":0,"properties":{"text":""},"widgets_values":["修复面部、手部以及高清放大"],"color":"#432","bgcolor":"#653"},{"id":509,"type":"Note","pos":[-1118.8139912381262,591.387878165186],"size":{"0":210,"1":70},"flags":{},"order":7,"mode":0,"properties":{"text":""},"widgets_values":["采样器"],"color":"#432","bgcolor":"#653"},{"id":569,"type":"Note","pos":[-1118.8139912381262,1705.3878781651856],"size":{"0":210,"1":70},"flags":{},"order":8,"mode":0,"properties":{"text":""},"widgets_values":["放大系数"],"color":"#432","bgcolor":"#653"},{"id":171,"type":"AIO_Preprocessor","pos":[-2191.554658763747,1761.344113729572],"size":{"0":292.06689453125,"1":82},"flags":{"pinned":false},"order":59,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":536,"label":"图像","slot_index":0}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[539,926],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"AIO_Preprocessor"},"widgets_values":["DWPreprocessor",512]},{"id":405,"type":"ImageScale","pos":[-2191.554658763747,1488.3441137295729],"size":{"0":298.0180358886719,"1":122},"flags":{"pinned":false},"order":69,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":700,"label":"图像"},{"name":"width","type":"INT","link":800,"widget":{"name":"width"},"label":"宽度"},{"name":"height","type":"INT","link":801,"widget":{"name":"height"},"label":"高度"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[703],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"ImageScale"},"widgets_values":["nearest-exact",512,512,"center"]},{"id":91,"type":"ControlNetApply","pos":[-2193.554658763747,1345.3441137295729],"size":{"0":296.0180358886719,"1":98},"flags":{},"order":77,"mode":0,"inputs":[{"name":"conditioning","type":"CONDITIONING","link":449,"label":"条件"},{"name":"control_net","type":"CONTROL_NET","link":133,"label":"ControlNet"},{"name":"image","type":"IMAGE","link":703,"label":"图像"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[782],"shape":3,"label":"条件","slot_index":0}],"properties":{"Node name for S&R":"ControlNetApply"},"widgets_values":[0.7000000000000001]},{"id":502,"type":"UpscaleModelLoader","pos":[4383.921202237528,-148.29415462420238],"size":{"0":315,"1":58},"flags":{},"order":9,"mode":0,"outputs":[{"name":"UPSCALE_MODEL","type":"UPSCALE_MODEL","links":[866],"slot_index":0,"label":"放大模型"}],"properties":{"Node name for S&R":"UpscaleModelLoader"},"widgets_values":["4x-UltraSharp.pth"],"color":"#223","bgcolor":"#335"},{"id":277,"type":"Reroute","pos":[-1111.8139912381262,1887.3878781651856],"size":[140.8,26],"flags":{},"order":71,"mode":0,"inputs":[{"name":"","type":"*","link":414,"label":""}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[802,916,920,924],"slot_index":0,"label":"CONDITIONING"}],"properties":{"showOutputText":true,"horizontal":false},"color":"#322","bgcolor":"#533"},{"id":128,"type":"Reroute","pos":[-1118.8139912381262,1813.3878781651856],"size":[140.8,26],"flags":{},"order":81,"mode":0,"inputs":[{"name":"","type":"*","link":765,"label":""}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[697,898,917,923],"slot_index":0,"label":"CONDITIONING"}],"properties":{"showOutputText":true,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":546,"type":"Reroute","pos":[-950.8139912381264,1886.3878781651856],"size":[90.4,26],"flags":{},"order":88,"mode":0,"inputs":[{"name":"","type":"*","link":921}],"outputs":[{"name":"LATENT","type":"LATENT","links":[922],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":399,"type":"SAMLoader","pos":[2332.8241918044987,65.01942334978241],"size":{"0":315,"1":82},"flags":{"collapsed":true},"order":10,"mode":0,"outputs":[{"name":"SAM_MODEL","type":"SAM_MODEL","links":[688,863],"shape":3,"label":"SAM模型","slot_index":0}],"properties":{"Node name for S&R":"SAMLoader"},"widgets_values":["sam_vit_b_01ec64.pth","AUTO"]},{"id":61,"type":"Reroute","pos":[2339.8241918044987,-14.980576650217742],"size":[140.8,26],"flags":{},"order":86,"mode":0,"inputs":[{"name":"","type":"*","link":917,"label":""}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[66,72,81],"slot_index":0,"label":"CONDITIONING"}],"properties":{"showOutputText":true,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":276,"type":"Reroute","pos":[2338.8241918044987,-48.98057665021776],"size":[140.8,26],"flags":{},"order":74,"mode":0,"inputs":[{"name":"","type":"*","link":916,"label":""}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[410,411,413],"label":"CONDITIONING"}],"properties":{"showOutputText":true,"horizontal":false},"color":"#322","bgcolor":"#533"},{"id":217,"type":"Reroute","pos":[2339.8241918044987,-82.98057665021761],"size":[82,26],"flags":{},"order":92,"mode":0,"inputs":[{"name":"","type":"*","link":915,"label":""}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[337],"label":"IMAGE"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":58,"type":"Reroute","pos":[2340.8241918044987,-119.98057665021763],"size":[82,26],"flags":{},"order":83,"mode":0,"inputs":[{"name":"","type":"*","link":918,"label":""}],"outputs":[{"name":"MODEL","type":"MODEL","links":[63,70,77],"slot_index":0,"label":"MODEL"}],"properties":{"showOutputText":true,"horizontal":false},"color":"#432","bgcolor":"#653"},{"id":67,"type":"UltralyticsDetectorProvider","pos":[3050.8241918044987,-122.98057665021763],"size":{"0":497.46490478515625,"1":78},"flags":{"pinned":false},"order":11,"mode":0,"outputs":[{"name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[76],"shape":3,"label":"BBox检测","slot_index":0},{"name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":[862],"shape":3,"label":"SEGM检测","slot_index":1}],"properties":{"Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["bbox/hand_yolov8s.pt"]},{"id":66,"type":"FaceDetailer","pos":[3053.8241918044987,2.019423349782293],"size":{"0":506.4000244140625,"1":836},"flags":{},"order":101,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":78,"label":"图像"},{"name":"model","type":"MODEL","link":77,"label":"模型"},{"name":"clip","type":"CLIP","link":null,"label":"CLIP"},{"name":"vae","type":"VAE","link":null,"label":"VAE"},{"name":"positive","type":"CONDITIONING","link":81,"label":"正面提示词"},{"name":"negative","type":"CONDITIONING","link":411,"label":"负面提示词","slot_index":5},{"name":"bbox_detector","type":"BBOX_DETECTOR","link":76,"label":"BBox检测","slot_index":6},{"name":"sam_model_opt","type":"SAM_MODEL","link":863,"label":"SAM模型","slot_index":7},{"name":"segm_detector_opt","type":"SEGM_DETECTOR","link":862,"label":"Segm检测","slot_index":8},{"name":"detailer_hook","type":"DETAILER_HOOK","link":null,"label":"细化约束"},{"name":"sampler_name","type":"COMBO","link":478,"widget":{"name":"sampler_name"},"label":"采样器","slot_index":10},{"name":"seed","type":"INT","link":835,"widget":{"name":"seed"},"label":"随机种","slot_index":11},{"name":"scheduler","type":"COMBO","link":668,"widget":{"name":"scheduler"},"label":"调度器"},{"name":"steps","type":"INT","link":831,"widget":{"name":"steps"},"label":"步数","slot_index":13},{"name":"cfg","type":"FLOAT","link":739,"widget":{"name":"cfg"},"label":"CFG","slot_index":14}],"outputs":[{"name":"image","type":"IMAGE","links":[83],"shape":3,"label":"图像","slot_index":0},{"name":"cropped_refined","type":"IMAGE","links":null,"shape":6,"label":"细化图像"},{"name":"cropped_enhanced_alpha","type":"IMAGE","links":null,"shape":6,"label":"细化部分"},{"name":"mask","type":"MASK","links":null,"shape":3,"label":"遮罩"},{"name":"detailer_pipe","type":"DETAILER_PIPE","links":null,"shape":3,"label":"细化节点束"},{"name":"cnet_images","type":"IMAGE","links":null,"shape":6,"label":"cnet_images"}],"properties":{"Node name for S&R":"FaceDetailer"},"widgets_values":[256,true,768,217,"randomize",25,5,"dpmpp_2m_sde_gpu","karras",0.5,5,true,true,0.5,10,3,"center-1",0,0.93,0,0.7,"False",10,"",1,false,20]},{"id":3,"type":"KSampler","pos":[-1146.5131203434264,-18],"size":{"0":306.474365234375,"1":220.03607177734375},"flags":{},"order":84,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":463,"label":"模型"},{"name":"positive","type":"CONDITIONING","link":697,"label":"正面条件","slot_index":1},{"name":"negative","type":"CONDITIONING","link":802,"label":"负面条件","slot_index":2},{"name":"latent_image","type":"LATENT","link":146,"label":"Latent"},{"name":"seed","type":"INT","link":298,"widget":{"name":"seed"},"label":"随机种","slot_index":4},{"name":"sampler_name","type":"COMBO","link":299,"widget":{"name":"sampler_name"},"label":"采样器","slot_index":5},{"name":"scheduler","type":"COMBO","link":666,"widget":{"name":"scheduler"},"label":"调度器","slot_index":6},{"name":"cfg","type":"FLOAT","link":747,"widget":{"name":"cfg"},"label":"CFG","slot_index":7},{"name":"steps","type":"INT","link":836,"widget":{"name":"steps"},"label":"步数","slot_index":8}],"outputs":[{"name":"LATENT","type":"LATENT","links":[7,921],"slot_index":0,"label":"Latent"}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[217,"randomize",25,7,"dpmpp_2m_sde_gpu","karras",1]},{"id":561,"type":"Note","pos":[-2974,1975],"size":{"0":225.7589111328125,"1":81.57942962646484},"flags":{},"order":12,"mode":0,"properties":{"text":""},"widgets_values":["人物姿态编辑器（推荐载入人物图像参考）\n选择文生图时可以忽略该分组，否则此项为必选"],"color":"#432","bgcolor":"#653"},{"id":562,"type":"Note","pos":[-2522,1975],"size":{"0":218.37664794921875,"1":79.50957489013672},"flags":{},"order":13,"mode":0,"properties":{"text":""},"widgets_values":["人物照片上传（复杂姿态需要后期处理）\n选择文生图时可以忽略该分组，否则此项为必选"],"color":"#432","bgcolor":"#653"},{"id":308,"type":"Reroute","pos":[3977.441087181745,-160.40459939875473],"size":[90.4,26],"flags":{},"order":91,"mode":0,"inputs":[{"name":"","type":"*","link":922,"label":""}],"outputs":[{"name":"LATENT","type":"LATENT","links":[562],"label":"LATENT"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":267,"type":"Reroute","pos":[3980.441087181745,-117.40459939875551],"size":[82,26],"flags":{},"order":82,"mode":0,"inputs":[{"name":"","type":"*","link":899,"label":""}],"outputs":[{"name":"MODEL","type":"MODEL","links":[565],"slot_index":0,"label":"MODEL"}],"properties":{"showOutputText":true,"horizontal":false}},{"id":269,"type":"Reroute","pos":[3980.441087181745,-70.40459939875453],"size":[140.8,26],"flags":{},"order":85,"mode":0,"inputs":[{"name":"","type":"*","link":898,"label":""}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[566],"slot_index":0,"label":"CONDITIONING"}],"properties":{"showOutputText":true,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":268,"type":"Reroute","pos":[3981.441087181745,-22.40459939875284],"size":[140.8,26],"flags":{},"order":75,"mode":0,"inputs":[{"name":"","type":"*","link":920,"label":""}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[567],"slot_index":0,"label":"CONDITIONING"}],"properties":{"showOutputText":true,"horizontal":false},"color":"#322","bgcolor":"#533"},{"id":281,"type":"Reroute","pos":[-412,1731],"size":[140.8,26],"flags":{},"order":70,"mode":0,"inputs":[{"name":"","type":"*","link":882,"label":""}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[714,718],"slot_index":0,"label":"CONDITIONING"}],"properties":{"showOutputText":true,"horizontal":false},"color":"#232","bgcolor":"#353"},{"id":578,"type":"Note","pos":[-417,1542],"size":{"0":598.5126953125,"1":165.0767822265625},"flags":{},"order":14,"mode":0,"properties":{"text":""},"widgets_values":["配合styles selector（风格选择器），可以省去书写风格、质量等提示词；注意风格选择器与xl模型配合最好，1.5模型需要注意匹配类型，可能会出现很奇怪的图。"],"color":"#432","bgcolor":"#653"},{"id":511,"type":"Note","pos":[-1118.8139912381262,1066.3878781651856],"size":{"0":210,"1":70},"flags":{},"order":15,"mode":0,"properties":{"text":""},"widgets_values":["seed"],"color":"#432","bgcolor":"#653"},{"id":56,"type":"UpscaleModelLoader","pos":[3579,-123],"size":{"0":315,"1":58},"flags":{},"order":16,"mode":0,"outputs":[{"name":"UPSCALE_MODEL","type":"UPSCALE_MODEL","links":[51],"shape":3,"label":"放大模型","slot_index":0}],"properties":{"Node name for S&R":"UpscaleModelLoader"},"widgets_values":["4x-UltraSharp.pth"]},{"id":55,"type":"UltimateSDUpscale","pos":[3587,6],"size":{"0":315,"1":590},"flags":{},"order":104,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":83,"label":"图像"},{"name":"model","type":"MODEL","link":70,"label":"模型","slot_index":1},{"name":"positive","type":"CONDITIONING","link":72,"label":"正面条件"},{"name":"negative","type":"CONDITIONING","link":413,"label":"负面条件","slot_index":3},{"name":"vae","type":"VAE","link":null,"label":"VAE"},{"name":"upscale_model","type":"UPSCALE_MODEL","link":51,"label":"放大模型"},{"name":"sampler_name","type":"COMBO","link":479,"widget":{"name":"sampler_name"},"label":"采样器","slot_index":6},{"name":"seed","type":"INT","link":476,"widget":{"name":"seed"},"label":"随机种","slot_index":7},{"name":"scheduler","type":"COMBO","link":669,"widget":{"name":"scheduler"},"label":"调度器"},{"name":"cfg","type":"FLOAT","link":740,"widget":{"name":"cfg"},"label":"CFG","slot_index":9},{"name":"steps","type":"INT","link":832,"widget":{"name":"steps"},"label":"步数","slot_index":10},{"name":"upscale_by","type":"FLOAT","link":938,"widget":{"name":"upscale_by"},"slot_index":11}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[934],"shape":3,"label":"图像","slot_index":0}],"properties":{"Node name for S&R":"UltimateSDUpscale"},"widgets_values":[2,217,"decrement",25,7,"dpmpp_2m_sde_gpu","karras",0.25,"Linear",512,512,8,32,"None",1,64,8,16,"enable"]},{"id":316,"type":"Note","pos":[3589,746],"size":{"0":300.0009460449219,"1":87.99738311767578},"flags":{},"order":17,"mode":0,"properties":{"text":""},"widgets_values":["面部修复、手部修复、高清放大\n\n此处需要cuda=11.8，否则会报错"],"color":"#432","bgcolor":"#653"},{"id":195,"type":"PrimitiveNode","pos":[-1118.8104962747411,447],"size":{"0":210,"1":106},"flags":{"pinned":false},"order":18,"mode":0,"outputs":[{"name":"COMBO","type":"COMBO","links":[299,477,478,479,683],"widget":{"name":"sampler_name"},"slot_index":0,"label":"COMBO"}],"properties":{"Run widget replace on values":false},"widgets_values":["dpmpp_2m_sde_gpu","fixed",""],"color":"#432","bgcolor":"#653"},{"id":200,"type":"PrimitiveNode","pos":[-1118.8104962747411,698],"size":{"0":210,"1":106},"flags":{"pinned":false},"order":19,"mode":0,"outputs":[{"name":"COMBO","type":"COMBO","links":[666,667,668,669,684],"widget":{"name":"scheduler"},"slot_index":0,"label":"COMBO"}],"properties":{"Run widget replace on values":false},"widgets_values":["karras","fixed",""]},{"id":495,"type":"PrimitiveNode","pos":[-1118.8104962747411,1379],"size":{"0":210,"1":82},"flags":{},"order":20,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[829,831,832,833,836],"widget":{"name":"steps"},"slot_index":0,"label":"INT"}],"properties":{"Run widget replace on values":false},"widgets_values":[25,"fixed"],"color":"#432","bgcolor":"#653"},{"id":89,"type":"ControlNetLoader","pos":[-2189.554658763747,1659.3441137295729],"size":{"0":298.06689453125,"1":58.6168212890625},"flags":{"pinned":false},"order":21,"mode":0,"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[133],"shape":3,"label":"ControlNet","slot_index":0}],"properties":{"Node name for S&R":"ControlNetLoader"},"widgets_values":["control_v11p_sd15_openpose.pth"],"color":"#323","bgcolor":"#535"},{"id":8,"type":"VAEDecode","pos":[-1149,-133],"size":{"0":313.91314697265625,"1":66.32745361328125},"flags":{"collapsed":false},"order":87,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":7,"label":"Latent"},{"name":"vae","type":"VAE","link":null,"label":"VAE"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[86,914],"slot_index":0,"label":"图像"}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":539,"type":"CLIPVisionLoader","pos":[-1535,166],"size":{"0":315,"1":58},"flags":{},"order":22,"mode":0,"outputs":[{"name":"CLIP_VISION","type":"CLIP_VISION","links":[907],"shape":3}],"properties":{"Node name for S&R":"CLIPVisionLoader"},"widgets_values":["CLIP-ViT-H-14-laion2B-s32B-b79K.safetensors"]},{"id":255,"type":"LatentUpscaleBy","pos":[3994,62],"size":{"0":315,"1":82},"flags":{},"order":95,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":562,"label":"Latent","slot_index":0},{"name":"scale_by","type":"FLOAT","link":937,"widget":{"name":"scale_by"},"slot_index":1}],"outputs":[{"name":"LATENT","type":"LATENT","links":[378],"shape":3,"label":"Latent","slot_index":0}],"properties":{"Node name for S&R":"LatentUpscaleBy"},"widgets_values":["nearest-exact",1.5]},{"id":258,"type":"KSampler","pos":[3995,196],"size":{"0":315,"1":262},"flags":{},"order":100,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":565,"label":"模型","slot_index":0},{"name":"positive","type":"CONDITIONING","link":566,"label":"正面条件","slot_index":1},{"name":"negative","type":"CONDITIONING","link":567,"label":"负面条件","slot_index":2},{"name":"latent_image","type":"LATENT","link":378,"label":"Latent"},{"name":"sampler_name","type":"COMBO","link":683,"widget":{"name":"sampler_name"},"label":"采样器"},{"name":"scheduler","type":"COMBO","link":684,"widget":{"name":"scheduler"},"label":"调度器"},{"name":"seed","type":"INT","link":682,"widget":{"name":"seed"},"label":"随机种"},{"name":"cfg","type":"FLOAT","link":744,"widget":{"name":"cfg"},"label":"CFG","slot_index":7},{"name":"steps","type":"INT","link":833,"widget":{"name":"steps"},"label":"步数","slot_index":8}],"outputs":[{"name":"LATENT","type":"LATENT","links":[399],"shape":3,"label":"Latent","slot_index":0}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[217,"randomize",25,6,"dpmpp_2m_sde_gpu","karras",0.5]},{"id":253,"type":"Note","pos":[4010,767],"size":{"0":245.44161987304688,"1":66.79241943359375},"flags":{},"order":23,"mode":0,"properties":{"text":""},"widgets_values":["潜空间放大，同webui中的高清修复\n\n注意denoise值大小影响重绘幅度"],"color":"#432","bgcolor":"#653"},{"id":604,"type":"Note","pos":[4409,770],"size":{"0":245.44161987304688,"1":66.79241943359375},"flags":{},"order":24,"mode":0,"properties":{"text":""},"widgets_values":["仅模型放大，根据图片风格类型选择不同模型"],"color":"#432","bgcolor":"#653"},{"id":577,"type":"Note","pos":[201,1542],"size":{"0":630.8527221679688,"1":168.0366973876953},"flags":{},"order":25,"mode":0,"properties":{"text":""},"widgets_values":["注意embedding格式，以及版本对应\n格式：embedding:模型名称\n\nembedding模型区分1.5、2、xl，需要按版本选择使用"],"color":"#432","bgcolor":"#653"},{"id":505,"type":"UltimateSDUpscale","pos":[4388.236739697163,-41.93073881195197],"size":{"0":315,"1":590},"flags":{},"order":93,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":925},{"name":"model","type":"MODEL","link":867},{"name":"positive","type":"CONDITIONING","link":923},{"name":"negative","type":"CONDITIONING","link":924},{"name":"vae","type":"VAE","link":null},{"name":"upscale_model","type":"UPSCALE_MODEL","link":866},{"name":"upscale_by","type":"FLOAT","link":936,"widget":{"name":"upscale_by"},"slot_index":6}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[933,984],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"UltimateSDUpscale"},"widgets_values":[2,1116700855820990,"randomize",20,8,"dpmpp_3m_sde_gpu","karras",0.2,"Linear",512,512,8,32,"None",1,64,8,16,"enable"]},{"id":270,"type":"CircularVAEDecode","pos":[4000,513],"size":{"0":308.6820068359375,"1":91.57244110107422},"flags":{"collapsed":false},"order":103,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":399,"label":"samples","slot_index":0},{"name":"vae","type":"VAE","link":919,"label":"vae","slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[932,985],"shape":3,"label":"IMAGE","slot_index":0}],"properties":{"Node name for S&R":"CircularVAEDecode"},"widgets_values":["enable"]},{"id":609,"type":"Reroute","pos":[4215,683],"size":[82,26],"flags":{},"order":107,"mode":0,"inputs":[{"name":"","type":"*","link":985}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":null}],"properties":{"showOutputText":true,"horizontal":false}},{"id":608,"type":"Reroute","pos":[4611,683],"size":[82,26],"flags":{},"order":98,"mode":0,"inputs":[{"name":"","type":"*","link":984}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":null}],"properties":{"showOutputText":true,"horizontal":false}},{"id":586,"type":"ImagePadForOutpaint","pos":[2314,1219],"size":{"0":315,"1":174},"flags":{},"order":102,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":999}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[965],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":[954,966],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"ImagePadForOutpaint"},"widgets_values":[48,104,48,0,40],"color":"#233","bgcolor":"#355"},{"id":545,"type":"Reroute","pos":[-946,1849],"size":[82,26],"flags":{},"order":90,"mode":0,"inputs":[{"name":"","type":"*","link":914}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[915,925,986],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":534,"type":"Anything Everywhere","pos":[-1900,505],"size":{"0":210,"1":26},"flags":{},"order":62,"mode":0,"inputs":[{"name":"VAE","type":"*","link":900,"color_on":"#FF6E6E"}],"properties":{"Node name for S&R":"Anything Everywhere","group_restricted":0,"color_restricted":0},"widgets_values":[]},{"id":568,"type":"Float","pos":[-1119,1605],"size":{"0":214.03179931640625,"1":59.60298156738281},"flags":{},"order":26,"mode":0,"outputs":[{"name":"FLOAT","type":"FLOAT","links":[936,937,938],"shape":3}],"properties":{"Node name for S&R":"Float"},"widgets_values":[1.5]},{"id":513,"type":"Note","pos":[-1118.8139912381262,1497.3878781651856],"size":{"0":210,"1":70},"flags":{},"order":27,"mode":0,"properties":{"text":""},"widgets_values":["step"],"color":"#432","bgcolor":"#653"},{"id":510,"type":"Note","pos":[-1119,841],"size":{"0":210,"1":70},"flags":{},"order":28,"mode":0,"properties":{"text":""},"widgets_values":["调度器"],"color":"#432","bgcolor":"#653"},{"id":512,"type":"Note","pos":[-1119,1273],"size":{"0":210,"1":70},"flags":{},"order":29,"mode":0,"properties":{"text":""},"widgets_values":["CFG"],"color":"#432","bgcolor":"#653"},{"id":520,"type":"easy stylesSelector","pos":[872,1249],"size":[425,500],"flags":{},"order":60,"mode":0,"inputs":[{"name":"positive","type":"STRING","link":874,"widget":{"name":"positive"}},{"name":"negative","type":"STRING","link":875,"widget":{"name":"negative"}}],"outputs":[{"name":"positive","type":"STRING","links":[876],"shape":3,"slot_index":0},{"name":"negative","type":"STRING","links":[877],"shape":3,"slot_index":1}],"properties":{"values":["sai-photographic","Fooocus Masterpiece"],"Node name for S&R":"easy stylesSelector"},"widgets_values":["fooocus_styles","","","sai-photographic,Fooocus Masterpiece"]},{"id":581,"type":"CheckpointLoaderSimple","pos":[2317,1065],"size":{"0":315,"1":98},"flags":{},"order":30,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[945],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[946,947],"shape":3,"slot_index":1},{"name":"VAE","type":"VAE","links":[950,963],"shape":3,"slot_index":2}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["base\\epicrealism_v10-inpainting.safetensors"],"color":"#223","bgcolor":"#335"},{"id":566,"type":"Note","pos":[779.1252376330215,-115.41700372762372],"size":{"0":210,"1":70},"flags":{},"order":31,"mode":0,"properties":{"text":""},"widgets_values":["Ultimate放大"],"color":"#432","bgcolor":"#653"},{"id":68,"type":"PreviewImage","pos":[-722,18],"size":{"0":711.473876953125,"1":1072.1741943359375},"flags":{"pinned":false},"order":89,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":86,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"},"color":"#233","bgcolor":"#355"},{"id":571,"type":"Note","pos":[-1866,213],"size":{"0":309.9742431640625,"1":107.4555892944336},"flags":{},"order":32,"mode":0,"properties":{"text":""},"widgets_values":["【风格参考】，上传参考图片，即可生成同风格图片\n\n有时针对不同风格会获得意想不到的效果：\n\n可适当调整权重，对风格的影响会增强；\n\nweight_type和combine_embeds都会产生不同效果。"],"color":"#432","bgcolor":"#653"},{"id":570,"type":"Note","pos":[-2250,175],"size":{"0":313.0537414550781,"1":154.77285766601562},"flags":{},"order":33,"mode":0,"properties":{"text":""},"widgets_values":["通过【面部参考】能生成指定人物写真\n上传大头照最好"],"color":"#432","bgcolor":"#653"},{"id":535,"type":"Anything Everywhere","pos":[-1894,616],"size":{"0":210,"1":26},"flags":{},"order":63,"mode":0,"inputs":[{"name":"CLIP","type":"*","link":903,"color_on":"#FFD500"}],"properties":{"Node name for S&R":"Anything Everywhere","group_restricted":0,"color_restricted":0},"widgets_values":[]},{"id":477,"type":"Note","pos":[1703,1179],"size":{"0":563.6622314453125,"1":597.2919921875},"flags":{"pinned":false},"order":34,"mode":0,"title":"使用说明","properties":{"text":""},"widgets_values":["ai虚拟摄影工作流v2.4.240504\n专为摄影爱好者搭建，生成模特照片、姿态控制、高清修复\n注意：本次采用的XL模型，将1.5版本扩图所用到的inpainting模型去掉了。\n\n更新内容：\n1、适配最新IPAdapter plus，能根据指定人物面部和画风生成\n2、checkpoints和lora加载器整合，便于扩展\n3、骨架图节点更新为可编辑骨架图\n4、新增风格选择器\n5、删除tiled放大（效果不理想，且拖速度）\n6、删除了ipadapter换脸（适配新版）\n\n使用说明：\n首次运行按照分组序号依次进行设置,上传对应图片，如果不上传图片，务必将分组禁用；\nS类分组为系统模块，包括常用设置，如：采样器、seed种子、步数、CFG、重绘幅度、放大系数，统一设置，对采用和后面的高清放大生效；\nU类分组为高清修复模块，三个可以任意选择，均有一定修复能力，可根据需求禁用或启用。\n\n\n--------------------------------------------\n\n微信：gary1780\nQQ群：647564984（口令：ai）\n抖音：963053212\n小红书/B站：乐皮ai\n\n"],"color":"#432","bgcolor":"#653"},{"id":52,"type":"UltralyticsDetectorProvider","pos":[2516,-122],"size":{"0":497.46490478515625,"1":78},"flags":{},"order":35,"mode":0,"outputs":[{"name":"BBOX_DETECTOR","type":"BBOX_DETECTOR","links":[41],"shape":3,"label":"BBox检测"},{"name":"SEGM_DETECTOR","type":"SEGM_DETECTOR","links":[861],"shape":3,"label":"SEGM检测","slot_index":1}],"properties":{"Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["bbox/face_yolov8m.pt"]},{"id":42,"type":"FaceDetailer","pos":[2515,-1],"size":{"0":506.4000244140625,"1":836},"flags":{},"order":96,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":337,"label":"图像","slot_index":0},{"name":"model","type":"MODEL","link":63,"label":"模型"},{"name":"clip","type":"CLIP","link":null,"label":"CLIP"},{"name":"vae","type":"VAE","link":null,"label":"VAE"},{"name":"positive","type":"CONDITIONING","link":66,"label":"正面提示词"},{"name":"negative","type":"CONDITIONING","link":410,"label":"负面提示词","slot_index":5},{"name":"bbox_detector","type":"BBOX_DETECTOR","link":41,"label":"BBox检测","slot_index":6},{"name":"sam_model_opt","type":"SAM_MODEL","link":688,"label":"SAM模型","slot_index":7},{"name":"segm_detector_opt","type":"SEGM_DETECTOR","link":861,"label":"Segm检测","slot_index":8},{"name":"detailer_hook","type":"DETAILER_HOOK","link":null,"label":"细化约束"},{"name":"sampler_name","type":"COMBO","link":477,"widget":{"name":"sampler_name"},"label":"采样器","slot_index":10},{"name":"seed","type":"INT","link":472,"widget":{"name":"seed"},"label":"随机种","slot_index":11},{"name":"scheduler","type":"COMBO","link":667,"widget":{"name":"scheduler"},"label":"调度器"},{"name":"cfg","type":"FLOAT","link":737,"widget":{"name":"cfg"},"label":"CFG","slot_index":13},{"name":"steps","type":"INT","link":829,"widget":{"name":"steps"},"label":"步数","slot_index":14}],"outputs":[{"name":"image","type":"IMAGE","links":[78],"shape":3,"label":"图像","slot_index":0},{"name":"cropped_refined","type":"IMAGE","links":null,"shape":6,"label":"细化图像"},{"name":"cropped_enhanced_alpha","type":"IMAGE","links":null,"shape":6,"label":"细化部分"},{"name":"mask","type":"MASK","links":null,"shape":3,"label":"遮罩"},{"name":"detailer_pipe","type":"DETAILER_PIPE","links":null,"shape":3,"label":"细化节点束"},{"name":"cnet_images","type":"IMAGE","links":null,"shape":6,"label":"cnet_images"}],"properties":{"Node name for S&R":"FaceDetailer"},"widgets_values":[256,true,768,217,"randomize",25,5,"dpmpp_2m_sde_gpu","karras",0.5,5,true,true,0.5,10,3,"center-1",0,0.93,0,0.7,"False",10,"",1,false,20]},{"id":528,"type":"IPAdapterUnifiedLoaderFaceID","pos":[-2970,-141],"size":{"0":315,"1":126},"flags":{},"order":61,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":893},{"name":"ipadapter","type":"IPADAPTER","link":null}],"outputs":[{"name":"MODEL","type":"MODEL","links":[883],"shape":3,"slot_index":0},{"name":"ipadapter","type":"IPADAPTER","links":[884,890],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"IPAdapterUnifiedLoaderFaceID"},"widgets_values":["FACEID PLUS V2",0.6,"CPU"]},{"id":527,"type":"IPAdapterFaceID","pos":[-2630,10],"size":{"0":313.3264465332031,"1":322},"flags":{},"order":68,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":883},{"name":"ipadapter","type":"IPADAPTER","link":884,"slot_index":1},{"name":"image","type":"IMAGE","link":885},{"name":"image_negative","type":"IMAGE","link":null},{"name":"attn_mask","type":"MASK","link":null},{"name":"clip_vision","type":"CLIP_VISION","link":null},{"name":"insightface","type":"INSIGHTFACE","link":null}],"outputs":[{"name":"MODEL","type":"MODEL","links":[889],"shape":3,"slot_index":0},{"name":"face_image","type":"IMAGE","links":[888],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"IPAdapterFaceID"},"widgets_values":[0.8,2,"linear","concat",0,1,"V only"]},{"id":530,"type":"IPAdapterUnifiedLoader","pos":[-2641,-145],"size":{"0":367.0479431152344,"1":78},"flags":{},"order":72,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":889},{"name":"ipadapter","type":"IPADAPTER","link":890}],"outputs":[{"name":"model","type":"MODEL","links":[886],"shape":3,"slot_index":0},{"name":"ipadapter","type":"IPADAPTER","links":[887],"shape":3}],"properties":{"Node name for S&R":"IPAdapterUnifiedLoader"},"widgets_values":["PLUS FACE (portraits)"]},{"id":538,"type":"IPAdapterModelLoader","pos":[-1533,269],"size":{"0":315,"1":58},"flags":{},"order":36,"mode":0,"outputs":[{"name":"IPADAPTER","type":"IPADAPTER","links":[943],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"IPAdapterModelLoader"},"widgets_values":["ip-adapter-plus_sd15.safetensors"]},{"id":532,"type":"Efficient Loader","pos":[-2387,487],"size":{"0":400,"1":462},"flags":{},"order":56,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":892,"slot_index":0},{"name":"cnet_stack","type":"CONTROL_NET_STACK","link":null,"slot_index":1}],"outputs":[{"name":"MODEL","type":"MODEL","links":[893],"shape":3,"slot_index":0},{"name":"CONDITIONING+","type":"CONDITIONING","links":null,"shape":3},{"name":"CONDITIONING-","type":"CONDITIONING","links":null,"shape":3},{"name":"LATENT","type":"LATENT","links":null,"shape":3},{"name":"VAE","type":"VAE","links":[900,919],"shape":3,"slot_index":4},{"name":"CLIP","type":"CLIP","links":[903],"shape":3,"slot_index":5},{"name":"DEPENDENCIES","type":"DEPENDENCIES","links":null,"shape":3}],"properties":{"Node name for S&R":"Efficient Loader"},"widgets_values":["realistic\\majicMIX realistic 麦橘写实_v7.safetensors","Baked VAE",-2,"None",1,1,"CLIP_POSITIVE","CLIP_NEGATIVE","none","comfy",512,512,1],"color":"#223322","bgcolor":"#3f5159","shape":1},{"id":556,"type":"PreviewImage","pos":[776,25],"size":{"0":711.473876953125,"1":1072.1741943359375},"flags":{"pinned":false},"order":97,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":933,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"},"color":"#233","bgcolor":"#355"},{"id":533,"type":"CR LoRA Stack","pos":[-2899,514],"size":{"0":315,"1":342},"flags":{},"order":37,"mode":0,"inputs":[{"name":"lora_stack","type":"LORA_STACK","link":null}],"outputs":[{"name":"LORA_STACK","type":"LORA_STACK","links":[892],"shape":3},{"name":"show_help","type":"STRING","links":null,"shape":3}],"properties":{"Node name for S&R":"CR LoRA Stack"},"widgets_values":["Off","add_detail.safetensors",0.6,1,"Off","hanfu-v2.9.safetensors",0.8,1,"On","comfyui\\青柠_lime【CCD系列】_v1.0.safetensors",0.8,1]},{"id":537,"type":"IPAdapterAdvanced","pos":[-1527,-153],"size":{"0":315,"1":278},"flags":{},"order":78,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":944,"slot_index":0},{"name":"ipadapter","type":"IPADAPTER","link":943,"slot_index":1},{"name":"image","type":"IMAGE","link":906},{"name":"image_negative","type":"IMAGE","link":null},{"name":"attn_mask","type":"MASK","link":null},{"name":"clip_vision","type":"CLIP_VISION","link":907,"slot_index":5}],"outputs":[{"name":"MODEL","type":"MODEL","links":[931],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"IPAdapterAdvanced"},"widgets_values":[0.8,"ease in-out","concat",0,1,"K+V"]},{"id":557,"type":"PreviewImage","pos":[1526,25],"size":{"0":711.473876953125,"1":1072.1741943359375},"flags":{"pinned":false},"order":108,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":934,"label":"图像"}],"properties":{"Node name for S&R":"PreviewImage"},"color":"#233","bgcolor":"#355"},{"id":610,"type":"Reroute","pos":[2330,979],"size":[82,26],"flags":{},"order":94,"mode":0,"inputs":[{"name":"","type":"*","link":986}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[992,998],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":614,"type":"PreviewImage","pos":[3787,1003],"size":{"0":901.076904296875,"1":742.7364501953125},"flags":{},"order":113,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":994}],"properties":{"Node name for S&R":"PreviewImage"},"color":"#233","bgcolor":"#355"},{"id":582,"type":"KSampler","pos":[3454,1006],"size":{"0":315,"1":262},"flags":{},"order":110,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":945},{"name":"positive","type":"CONDITIONING","link":948},{"name":"negative","type":"CONDITIONING","link":949},{"name":"latent_image","type":"LATENT","link":964}],"outputs":[{"name":"LATENT","type":"LATENT","links":[961],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[105560240656315,"randomize",20,8,"euler","normal",1],"color":"#323","bgcolor":"#535"},{"id":613,"type":"CR Simple Image Compare","pos":[3458,1323],"size":{"0":308.76080322265625,"1":292.05181884765625},"flags":{},"order":112,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":992},{"name":"image2","type":"IMAGE","link":993}],"outputs":[{"name":"image","type":"IMAGE","links":[994],"shape":3,"slot_index":0},{"name":"show_help","type":"STRING","links":null,"shape":3}],"properties":{"Node name for S&R":"CR Simple Image Compare"},"widgets_values":["Original","Outpainting",100,"YoungSerif-Regular.ttf",50,"normal",20],"color":"#233","bgcolor":"#355"},{"id":585,"type":"VAEEncodeForInpaint","pos":[3153,1139],"size":{"0":244.06329345703125,"1":106.95335388183594},"flags":{},"order":109,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":967},{"name":"vae","type":"VAE","link":950},{"name":"mask","type":"MASK","link":954}],"outputs":[{"name":"LATENT","type":"LATENT","links":[964],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEEncodeForInpaint"},"widgets_values":[6],"color":"#323","bgcolor":"#535"},{"id":592,"type":"InpaintPreprocessor","pos":[3154,1313],"size":{"0":256.45513916015625,"1":46},"flags":{},"order":105,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":965},{"name":"mask","type":"MASK","link":966}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[967],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"InpaintPreprocessor"},"color":"#323","bgcolor":"#535"},{"id":584,"type":"CLIPTextEncode","pos":[3062,1494],"size":{"0":369.2253723144531,"1":172.96337890625},"flags":{},"order":55,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":947}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[949],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["embedding:EasyNegativeV2, embedding:bad_pictures_v2, "],"color":"#322","bgcolor":"#533"},{"id":554,"type":"PoseNode","pos":[-2972,1341],"size":{"0":432.44866943359375,"1":561.7445678710938},"flags":{},"order":38,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[929,1001],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"PoseNode"},"widgets_values":["Pose_0.png","add_pose","reset_pose",null],"color":"#233","bgcolor":"#355"},{"id":590,"type":"VAEDecode","pos":[3167,1021],"size":{"0":233.95758056640625,"1":46},"flags":{},"order":111,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":961},{"name":"vae","type":"VAE","link":963}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[993],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"},"color":"#323","bgcolor":"#535"},{"id":194,"type":"PrimitiveNode","pos":[-1118.8104962747411,949],"size":{"0":210,"1":82},"flags":{"pinned":false},"order":39,"mode":0,"outputs":[{"name":"INT","type":"INT","links":[298,472,476,682,835],"widget":{"name":"seed"},"slot_index":0,"label":"INT"}],"properties":{"Run widget replace on values":false},"widgets_values":[217,"fixed"],"color":"#432","bgcolor":"#653"},{"id":616,"type":"easy imageSwitch","pos":[2314,1455],"size":{"0":315,"1":78},"flags":{},"order":99,"mode":0,"inputs":[{"name":"image_a","type":"IMAGE","link":998,"slot_index":0},{"name":"image_b","type":"IMAGE","link":1006,"slot_index":1}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[999],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"easy imageSwitch"},"widgets_values":[true],"color":"#233","bgcolor":"#355"},{"id":529,"type":"IPAdapter","pos":[-2254.255378609989,-147.38095488476742],"size":{"0":315,"1":190},"flags":{},"order":76,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":886},{"name":"ipadapter","type":"IPADAPTER","link":887,"slot_index":1},{"name":"image","type":"IMAGE","link":888},{"name":"attn_mask","type":"MASK","link":null}],"outputs":[{"name":"MODEL","type":"MODEL","links":[944],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"IPAdapter"},"widgets_values":[0.4,0,1,"standard"]},{"id":572,"type":"Note","pos":[-770,1690],"size":{"0":275.2668151855469,"1":79.37359619140625},"flags":{},"order":40,"mode":0,"properties":{"text":""},"widgets_values":["分组管理"],"color":"#432","bgcolor":"#653"},{"id":605,"type":"Note","pos":[2311,1578],"size":{"0":330.1938781738281,"1":180.49098205566406},"flags":{},"order":41,"mode":0,"properties":{"text":""},"widgets_values":["此处需要选择带inpainting能力的大模型才能达到最好效果\n\n注意，此处无需与前面的模型版本保持一致\n\n如果想对放大的图进行扩图操作，需要将输入的image节点与高清放大输出节点连接。\n\n此扩图功能可独立使用，只需要将image switch设置为【false】，就能单独上传图片进行扩图。默认为【true】将生成的图片进行扩展。"],"color":"#432","bgcolor":"#653"},{"id":619,"type":"LoadImage","pos":[2664,996],"size":{"0":451.9200134277344,"1":422.884033203125},"flags":{},"order":42,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[1006],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["image (23).png","image"],"color":"#233","bgcolor":"#355"},{"id":413,"type":"CR Conditioning Input Switch","pos":[-1523,1644],"size":{"0":298.2115173339844,"1":86.72282409667969},"flags":{},"order":79,"mode":0,"inputs":[{"name":"conditioning1","type":"CONDITIONING","link":718,"label":"条件1"},{"name":"conditioning2","type":"CONDITIONING","link":782,"label":"条件2"}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[765],"shape":3,"label":"条件","slot_index":0},{"name":"show_help","type":"STRING","links":null,"shape":3,"label":"show_help"}],"properties":{"Node name for S&R":"CR Conditioning Input Switch"},"widgets_values":[2],"color":"#323","bgcolor":"#535"},{"id":542,"type":"Note","pos":[-1524.0931441053579,1774.1312451284566],"size":{"0":302.1720886230469,"1":142.8392791748047},"flags":{"collapsed":false,"pinned":false},"order":43,"mode":0,"properties":{"text":""},"widgets_values":["1、基础文生图，主要根据文本输入来完成，输入 1，此时生成人物姿态由提示词控制\n\n2、在文生图基础上，由骨架图控制生成人物姿态，输入 2\n\n文生图生成 的随机性更大，指定姿态之后会固定人物姿态，而且还能有效控制，避免出现多手多脚的情况"],"color":"#432","bgcolor":"#653"},{"id":92,"type":"Note","pos":[-1850.0931441053574,1774.1312451284566],"size":{"0":302.1720886230469,"1":142.8392791748047},"flags":{"collapsed":false,"pinned":false},"order":44,"mode":0,"properties":{"text":""},"widgets_values":["1、上传人物照片，提取人物姿态,输入 1\n\n2、已有骨架图或自定义骨架图，输入 2\n\n当右侧条件输入为 1 时，人物姿态设置不生效，即不受控。\n\n\n同时自动获取图片分辨率,并以该分辨率作为生成图片尺寸\n\n如大模型为XL,则此处预处理器选择对应XL版本\n\n首次运行，两个上传图片的节点均不能为空。"],"color":"#432","bgcolor":"#653"},{"id":474,"type":"CR SDXL Aspect Ratio","pos":[1349,1240],"size":{"0":310.19677734375,"1":278},"flags":{},"order":45,"mode":0,"outputs":[{"name":"width","type":"INT","links":[797,800],"shape":3,"label":"宽度","slot_index":0},{"name":"height","type":"INT","links":[798,801],"shape":3,"label":"高度","slot_index":1},{"name":"upscale_factor","type":"FLOAT","links":null,"shape":3,"label":"放大系数"},{"name":"batch_size","type":"INT","links":[799],"shape":3,"label":"批次大小","slot_index":3},{"name":"empty_latent","type":"LATENT","links":null,"shape":3,"label":"empty_latent"},{"name":"show_help","type":"STRING","links":null,"shape":3,"label":"show_help"}],"properties":{"Node name for S&R":"CR SDXL Aspect Ratio"},"widgets_values":[768,1024,"custom","Off",1,1]},{"id":514,"type":"Note","pos":[1359.7476885769224,1561.881468726801],"size":{"0":306.9087219238281,"1":111.89877319335938},"flags":{},"order":46,"mode":0,"properties":{"text":""},"widgets_values":["自定义尺寸\n参数说明：\n可在aspect_ratio中按宽高比设置，也可以选择custom后自行定义宽高；\nswap_dimensions为宽高转换"],"color":"#432","bgcolor":"#653"},{"id":579,"type":"Fast Groups Bypasser (rgthree)","pos":{"0":-761,"1":1244,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"size":{"0":252,"1":442},"flags":{},"order":47,"mode":0,"inputs":[],"outputs":[{"name":"OPT_CONNECTION","type":"*","links":null}],"properties":{"matchColors":"","matchTitle":"","showNav":true,"sort":"position","customSortAlphabet":"","toggleRestriction":"default"}},{"id":583,"type":"CLIPTextEncode","pos":[2670,1493],"size":{"0":363.62774658203125,"1":178.28077697753906},"flags":{},"order":54,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":946}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[948],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["flower, "],"color":"#232","bgcolor":"#353"},{"id":330,"type":"CR Image Input Switch","pos":[-1850,1648],"size":{"0":304.1292419433594,"1":84.0591812133789},"flags":{},"order":64,"mode":0,"inputs":[{"name":"image1","type":"IMAGE","link":539,"label":"图像1"},{"name":"image2","type":"IMAGE","link":1001,"label":"图像2"}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[700],"shape":3,"label":"图像","slot_index":0},{"name":"show_help","type":"STRING","links":null,"shape":3,"label":"show_help"}],"properties":{"Node name for S&R":"CR Image Input Switch"},"widgets_values":[1],"color":"#323","bgcolor":"#535"},{"id":393,"type":"Text Multiline","pos":[-419,1248],"size":{"0":603.0115966796875,"1":246.56784057617188},"flags":{"pinned":false},"order":48,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[874],"shape":3,"label":"字符串","slot_index":0}],"properties":{"Node name for S&R":"Text Multiline"},"widgets_values":["1girl, solo, long hair,Wearing garlands of colorful flowers,blue dress,outdoors, "],"color":"#232","bgcolor":"#353"},{"id":439,"type":"Float","pos":[-1118.8104962747411,1174],"size":{"0":210,"1":60},"flags":{},"order":49,"mode":0,"outputs":[{"name":"FLOAT","type":"FLOAT","links":[737,739,740,744,747],"shape":3,"label":"浮点"}],"properties":{"Node name for S&R":"Float"},"widgets_values":[6]},{"id":331,"type":"LoadImage","pos":[-2525,1335],"size":{"0":319.06866455078125,"1":572.0545654296875},"flags":{"pinned":false},"order":50,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[536],"shape":3,"label":"图像"},{"name":"MASK","type":"MASK","links":null,"shape":3,"label":"遮罩"}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["00085-605128440.jpeg","image"]},{"id":526,"type":"LoadImage","pos":[-2964,24],"size":{"0":315,"1":314.0000915527344},"flags":{},"order":51,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[885],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["image (1).png","image"]},{"id":536,"type":"LoadImage","pos":[-1868,-151],"size":{"0":315,"1":314.0001220703125},"flags":{},"order":52,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[906],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["image (15) (2).png","image"]},{"id":430,"type":"Text Multiline","pos":[200,1251],"size":{"0":634.482177734375,"1":248.6691131591797},"flags":{"pinned":false},"order":53,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[875],"shape":3,"label":"字符串","slot_index":0}],"properties":{"Node name for S&R":"Text Multiline"},"widgets_values":["(embedding:EasyNegativeV2:1.35), ,embedding:bad_pictures_v2, embedding:badhandv4, Swimwear, breasts,blurry, noisy, messy, lowres, jpeg, artifacts, ill, distorted, malformed,building, "],"color":"#322","bgcolor":"#533"}],"links":[[7,3,0,8,0,"LATENT"],[41,52,0,42,6,"BBOX_DETECTOR"],[51,56,0,55,5,"UPSCALE_MODEL"],[63,58,0,42,1,"MODEL"],[66,61,0,42,4,"CONDITIONING"],[70,58,0,55,1,"MODEL"],[72,61,0,55,2,"CONDITIONING"],[76,67,0,66,6,"BBOX_DETECTOR"],[77,58,0,66,1,"MODEL"],[78,42,0,66,0,"IMAGE"],[81,61,0,66,4,"CONDITIONING"],[83,66,0,55,0,"IMAGE"],[86,8,0,68,0,"IMAGE"],[133,89,0,91,1,"CONTROL_NET"],[146,5,0,3,3,"LATENT"],[298,194,0,3,4,"INT"],[299,195,0,3,5,"COMBO"],[337,217,0,42,0,"IMAGE"],[378,255,0,258,3,"LATENT"],[399,258,0,270,0,"LATENT"],[410,276,0,42,5,"CONDITIONING"],[411,276,0,66,5,"CONDITIONING"],[413,276,0,55,3,"CONDITIONING"],[414,7,0,277,0,"*"],[449,298,0,91,0,"CONDITIONING"],[463,279,0,3,0,"MODEL"],[472,194,0,42,11,"INT"],[476,194,0,55,7,"INT"],[477,195,0,42,10,"COMBO"],[478,195,0,66,10,"COMBO"],[479,195,0,55,6,"COMBO"],[536,331,0,171,0,"IMAGE"],[539,171,0,330,0,"IMAGE"],[562,308,0,255,0,"LATENT"],[565,267,0,258,0,"MODEL"],[566,269,0,258,1,"CONDITIONING"],[567,268,0,258,2,"CONDITIONING"],[666,200,0,3,6,"COMBO"],[667,200,0,42,12,"COMBO"],[668,200,0,66,12,"COMBO"],[669,200,0,55,8,"COMBO"],[682,194,0,258,6,"INT"],[683,195,0,258,4,"COMBO"],[684,200,0,258,5,"COMBO"],[688,399,0,42,7,"SAM_MODEL"],[697,128,0,3,1,"CONDITIONING"],[700,330,0,405,0,"IMAGE"],[703,405,0,91,2,"IMAGE"],[714,281,0,298,0,"*"],[718,281,0,413,0,"CONDITIONING"],[737,439,0,42,13,"FLOAT"],[739,439,0,66,14,"FLOAT"],[740,439,0,55,9,"FLOAT"],[744,439,0,258,7,"FLOAT"],[747,439,0,3,7,"FLOAT"],[765,413,0,128,0,"*"],[782,91,0,413,1,"CONDITIONING"],[797,474,0,5,0,"INT"],[798,474,1,5,1,"INT"],[799,474,3,5,2,"INT"],[800,474,0,405,1,"INT"],[801,474,1,405,2,"INT"],[802,277,0,3,2,"CONDITIONING"],[829,495,0,42,14,"INT"],[831,495,0,66,13,"INT"],[832,495,0,55,10,"INT"],[833,495,0,258,8,"INT"],[835,194,0,66,11,"INT"],[836,495,0,3,8,"INT"],[861,52,1,42,8,"SEGM_DETECTOR"],[862,67,1,66,8,"SEGM_DETECTOR"],[863,399,0,66,7,"SAM_MODEL"],[866,502,0,505,5,"UPSCALE_MODEL"],[867,279,0,505,1,"MODEL"],[874,393,0,520,0,"STRING"],[875,430,0,520,1,"STRING"],[876,520,0,6,1,"STRING"],[877,520,1,7,1,"STRING"],[882,6,0,281,0,"*"],[883,528,0,527,0,"MODEL"],[884,528,1,527,1,"IPADAPTER"],[885,526,0,527,2,"IMAGE"],[886,530,0,529,0,"MODEL"],[887,530,1,529,1,"IPADAPTER"],[888,527,1,529,2,"IMAGE"],[889,527,0,530,0,"MODEL"],[890,528,1,530,1,"IPADAPTER"],[892,533,0,532,0,"LORA_STACK"],[893,532,0,528,0,"MODEL"],[898,128,0,269,0,"*"],[899,279,0,267,0,"*"],[900,532,4,534,0,"VAE"],[903,532,5,535,0,"CLIP"],[906,536,0,537,2,"IMAGE"],[907,539,0,537,5,"CLIP_VISION"],[914,8,0,545,0,"*"],[915,545,0,217,0,"*"],[916,277,0,276,0,"*"],[917,128,0,61,0,"*"],[918,279,0,58,0,"*"],[919,532,4,270,1,"VAE"],[920,277,0,268,0,"*"],[921,3,0,546,0,"*"],[922,546,0,308,0,"*"],[923,128,0,505,2,"CONDITIONING"],[924,277,0,505,3,"CONDITIONING"],[925,545,0,505,0,"IMAGE"],[926,171,0,547,0,"IMAGE"],[929,554,0,548,0,"IMAGE"],[931,537,0,279,0,"*"],[932,270,0,555,0,"IMAGE"],[933,505,0,556,0,"IMAGE"],[934,55,0,557,0,"IMAGE"],[936,568,0,505,6,"FLOAT"],[937,568,0,255,1,"FLOAT"],[938,568,0,55,11,"FLOAT"],[943,538,0,537,1,"IPADAPTER"],[944,529,0,537,0,"MODEL"],[945,581,0,582,0,"MODEL"],[946,581,1,583,0,"CLIP"],[947,581,1,584,0,"CLIP"],[948,583,0,582,1,"CONDITIONING"],[949,584,0,582,2,"CONDITIONING"],[950,581,2,585,1,"VAE"],[954,586,1,585,2,"MASK"],[961,582,0,590,0,"LATENT"],[963,581,2,590,1,"VAE"],[964,585,0,582,3,"LATENT"],[965,586,0,592,0,"IMAGE"],[966,586,1,592,1,"MASK"],[967,592,0,585,0,"IMAGE"],[984,505,0,608,0,"*"],[985,270,0,609,0,"*"],[986,545,0,610,0,"*"],[992,610,0,613,0,"IMAGE"],[993,590,0,613,1,"IMAGE"],[994,613,0,614,0,"IMAGE"],[998,610,0,616,0,"IMAGE"],[999,616,0,586,0,"IMAGE"],[1001,554,0,330,1,"IMAGE"],[1006,619,0,616,1,"IMAGE"]],"groups":[{"title":"S-预览","bounding":[-794,-240,3062,1348],"color":"#8AA","font_size":38,"locked":false},{"title":"1-面部参考（指定人物）-可忽略","bounding":[-2982,-239,1083,575],"color":"#3f789e","font_size":38,"locked":false},{"title":"2-风格参考-可忽略","bounding":[-1878,-239,682,571],"color":"#3f789e","font_size":38,"locked":false},{"title":"S-采样输出","bounding":[-1158,-239,327,568],"color":"#3f789e","font_size":38,"locked":false},{"title":"U-修复与放大","bounding":[2304,-241,1624,1106],"color":"#3f789e","font_size":38,"locked":false},{"title":"U-高清放大","bounding":[4373,-239,347,1101],"color":"#3f789e","font_size":38,"locked":false},{"title":"3-大模型与lora+全局参数","bounding":[-2983,362,1787,841],"color":"#3f789e","font_size":38,"locked":false},{"title":"S-采样器+CFG+重绘幅度度","bounding":[-1157,364,328,1568],"color":"#3f789e","font_size":38,"locked":false},{"title":"S-分组管理","bounding":[-793,1151,327,624],"color":"#3f789e","font_size":38,"locked":false},{"title":"S-提示词+风格+分辨率设置","bounding":[-437,1152,2125,623],"color":"#3f789e","font_size":38,"locked":false},{"title":"U-潜空间放大（同webui）","bounding":[3957,-239,383,1105],"color":"#3f789e","font_size":38,"locked":false},{"title":"4-默认从人物提取骨架图_Controlnet OpenPose","bounding":[-2985,1240,1105,684],"color":"#3f789e","font_size":38,"locked":false},{"title":"5-设置生成方式","bounding":[-1863,1571,663,358],"color":"#a1309b","font_size":24,"locked":false},{"title":"S-人物姿态预览(不要动)","bounding":[-1861,1243,663,310],"color":"#3f789e","font_size":24,"locked":false},{"title":"虚拟摄影工作流v2.4.24050404（研学版） @乐皮ai","bounding":[-1018,-532,3460,213],"color":"#b58b2a","font_size":150,"locked":true},{"title":"U-扩图","bounding":[2302,909,2413,868],"color":"#3f789e","font_size":24,"locked":false}],"config":{},"extra":{"workspace_info":{"id":"TL3NpI3BEh2ppfB548wlM","name":"dev-ai虚拟摄影工作流v2.5 2"},"groupNodes":{}},"version":0.4}